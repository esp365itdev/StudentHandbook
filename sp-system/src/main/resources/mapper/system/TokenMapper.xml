<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sp.system.mapper.TokenMapper">

    <resultMap type="com.sp.system.entity.Token" id="TokenResult">
        <id     property="id"        column="id"        />
        <result property="userId"    column="user_id"   />
        <result property="parentUserId"    column="parent_user_id"   />
        <result property="token"     column="token"     />
        <result property="expireTime" column="expire_time" />
        <result property="createTime" column="create_time" />
        <result property="updateTime" column="update_time" />
    </resultMap>

    <select id="selectByTokenValue" parameterType="string" resultMap="TokenResult">
        select id, user_id, parent_user_id, token, expire_time, create_time, update_time
        from sys_token
        where token = #{tokenValue}
    </select>

    <delete id="deleteByUserId" parameterType="long">
        delete from sys_token where user_id = #{userId}
    </delete>

    <insert id="insertToken" parameterType="com.sp.system.entity.Token">
        insert into sys_token (user_id, parent_user_id, token, expire_time, create_time, update_time)
        values (#{userId}, #{parentUserId}, #{token}, #{expireTime}, #{createTime}, #{updateTime})
    </insert>

</mapper>